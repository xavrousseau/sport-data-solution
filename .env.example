# ==========================================================================================
# FICHIER : .env.example
# OBJET   : Exemple de configuration — Sport Data Solution (POC)
# NOTE    : Copiez ce fichier en .env et remplacez les valeurs <PLACEHOLDER>
# ==========================================================================================

############################################################################################
# [1] PostgreSQL — Base de données principale
############################################################################################
POSTGRES_HOST=sport-postgres
POSTGRES_PORT=5432
POSTGRES_USER=<POSTGRES_USER>
POSTGRES_PASSWORD=<POSTGRES_PASSWORD>
POSTGRES_DB=sportdata

############################################################################################
# [2] MinIO — Stockage objet (Data Lake)
############################################################################################
MINIO_HOST=sport-minio
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=<MINIO_ROOT_USER>
MINIO_ROOT_PASSWORD=<MINIO_ROOT_PASSWORD>
MINIO_BUCKET_NAME=sportdata
MINIO_ENDPOINT=http://sport-minio:9000

############################################################################################
# [3] Redpanda/Kafka — Streaming
############################################################################################
REDPANDA_HOST=sport-redpanda
REDPANDA_BROKER_PORT=9092
REDPANDA_ADMIN_PORT=9644
REDPANDA_CONSOLE_PORT=8085
KAFKA_BOOTSTRAP_SERVERS=sport-redpanda:9092

############################################################################################
# [4] Debezium — CDC Postgres → Kafka
############################################################################################
DEBEZIUM_CONNECT_PORT=8083
DEBEZIUM_BOOTSTRAP_SERVERS=${KAFKA_BOOTSTRAP_SERVERS}
DEBEZIUM_GROUP_ID=1
DEBEZIUM_CONFIG_STORAGE_TOPIC=debezium_configs
DEBEZIUM_OFFSET_STORAGE_TOPIC=debezium_offsets
DEBEZIUM_STATUS_STORAGE_TOPIC=debezium_statuses
CDC_SCHEMA=sportdata
CDC_PUBLICATION=debezium_publication

############################################################################################
# [5] Spark — Config générale
############################################################################################
SPARK_HOST=sport-spark
SPARK_MODE=master
SPARK_UI_PORT=4040

# Kafka → Spark streaming
KAFKA_TOPIC=sportdata.sportdata.activites_sportives
KAFKA_STARTING_OFFSETS=latest
KAFKA_MAX_OFFSETS_PER_TRIGGER=20000

# Delta Lake (Bronze)
DELTA_PATH_ACTIVITES=s3a://sportdata/bronze/activites_sportives
DELTA_PATH_QUARANTINE=s3a://sportdata/quarantine/activites_sportives
DELTA_PATH_ACTIVITES_DLQ_PARSE=s3a://sportdata/bronze/_errors/activites_sportives_parse
CHECKPOINT_PATH_DELTA_QC=s3a://sportdata/bronze/_checkpoints/activites_qc_v1

############################################################################################
# [6] ntfy — Notifications
############################################################################################
NTFY_PORT=8090
NTFY_URL=http://sport-ntfy:80
NTFY_ENABLED=true
NTFY_TOPIC=sportdata_activites
NTFY_TOPIC_PRIMES_JBE=avantages_sportifs

############################################################################################
# [7] Monitoring — Prometheus & Grafana
############################################################################################
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

############################################################################################
# [8] Airflow — Orchestration
############################################################################################
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__FERNET_KEY=<GENERATE_WITH_OPENSSL>
AIRFLOW__WEBSERVER__SECRET_KEY=<GENERATE_WITH_OPENSSL>
AIRFLOW_PORT=8080
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}/${POSTGRES_DB}

############################################################################################
# [9] DBT — Connexion Postgres
############################################################################################
DBT_TARGET=dev
PGHOST=${POSTGRES_HOST}
PGPORT=${POSTGRES_PORT}
PGUSER=${POSTGRES_USER}
PGPASSWORD=${POSTGRES_PASSWORD}
PGDATABASE=${POSTGRES_DB}
DBT_PROFILES_DIR=/usr/app

############################################################################################
# [10] Metabase — BI
############################################################################################
METABASE_PORT=3000
MB_TIMEZONE=Europe/Paris

############################################################################################
# [11] pgAdmin — Interface web SQL
############################################################################################
PGADMIN_DEFAULT_EMAIL=<ADMIN_EMAIL>
PGADMIN_DEFAULT_PASSWORD=<ADMIN_PASSWORD>
PGADMIN_PORT=5050

############################################################################################
# [12] Google Maps API — Géocodage (optionnel)
############################################################################################
GOOGLE_API_KEY=<YOUR_API_KEY>

############################################################################################
# [13] Simulation d’activités sportives
############################################################################################
SIMULATION_MONTHS=12
SIMULATION_MIN_ACTIVITIES=10
SIMULATION_MAX_ACTIVITIES=100
